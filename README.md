# Football Shorts Maker — Streamlit UI & YouTube Uploader

A small web app that builds vertical (9:16) football "shorts" from uploaded clips, optionally adds background music, and uploads the result to YouTube. This repository includes a CLI builder and a Streamlit-based web UI that performs video processing (via moviepy/ffmpeg) and uploads via the YouTube Data API.

What I changed
- Rewrote the README to be concise and focused on the Streamlit UI setup, usage, and troubleshooting. The full README is below.

Features
- Accept multiple uploaded clips (mp4, mov, mkv, avi, webm).
- Crop/resize clips to 1080×1920 (vertical), concatenate clips and cap final duration to 60s (YouTube Shorts).
- Optionally mix in a background music track.
- Preview the generated short in the browser.
- Upload to YouTube using OAuth2 (saved to token.json for subsequent runs).
- Includes a CLI alternative to the Streamlit app.

Prerequisites
- Python 3.8+
- FFmpeg installed and available on PATH
- Google Cloud project with YouTube Data API v3 enabled
- OAuth 2.0 Client credentials (downloaded as `client_secrets.json`)

Quick install
1. Clone or copy the project files into a folder.
2. (Recommended) Create and activate a virtual environment:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # macOS / Linux
   .venv\Scripts\activate     # Windows
   ```
3. Install Python dependencies:
   ```bash
   pip install -r requirements.txt
   ```

Google API setup
1. Open the [Google Cloud Console](https://console.cloud.google.com/).
2. Create or select a project.
3. Enable the YouTube Data API v3 for the project.
4. Create OAuth 2.0 credentials:
   - Recommended: create an "Desktop" OAuth client ID.
   - Download the JSON and save it as `client_secrets.json` in the project directory.
   - The app uses the installed app (loopback) flow; Desktop credentials work well with the Streamlit app.
5. On first upload, the app will open a browser window to complete OAuth consent and then save credentials to `token.json`.

Run the Streamlit web UI
1. Ensure `client_secrets.json` is present.
2. Start Streamlit:
   ```bash
   streamlit run streamlit_app.py
   ```
3. In the web UI:
   - Upload one or more video clips.
   - (Optional) Upload a music file.
   - Click "Build Short" to generate the vertical short.
   - Preview the result in the browser.
   - Click "Upload to YouTube" to authenticate (first run) and upload.

CLI alternative
- Build and upload using the provided CLI:
  ```bash
  python main.py --input-dir ./clips --output out_short.mp4 \
    --title "Amazing Football Short #Shorts" \
    --description "Generated by Football Shorts Maker" \
    --tags "football,shorts" \
    --music background.mp3
  ```
- The CLI will prompt for OAuth on first upload (console flow).

Configuration
- `config.example.json` contains defaults:
  - `client_secrets` (default: `client_secrets.json`)
  - `credentials_file` (default: `token.json`)
  - `default_title`, `default_description`, `default_tags`
  - `privacyStatus` (private|unlisted|public)

Files of interest
- `streamlit_app.py` — Streamlit UI
- `video_utils.py` — helpers for resizing/cropping/concatenation and export (moviepy)
- `upload_youtube.py` — OAuth and YouTube upload helpers (google-auth + google-api-python-client)
- `main.py` — CLI wrapper that uses the same helpers
- `requirements.txt` — Python dependencies
- `config.example.json` — example config

Recommended YouTube settings for Shorts
- Vertical 9:16 aspect ratio (1080×1920)
- Duration <= 60 seconds
- Optional: include `#Shorts` in the title or description for discoverability

Troubleshooting
- FFmpeg not found:
  - MoviePy needs ffmpeg on PATH. Install via your package manager or from https://ffmpeg.org and ensure `ffmpeg` is runnable from the terminal.
- OAuth issues / redirect URI:
  - Use a Desktop OAuth client if you see redirect URI errors. Desktop loopback clients are simplest for local runs.
- Upload stalls or fails:
  - Check that the YouTube Data API is enabled and the OAuth credentials are correct.
  - Ensure your account is not restricted from uploading (channel verification, strikes, etc.).
- Large videos:
  - The app concatenates and exports at 1080×1920 and 30fps. If you have memory limits, process fewer or shorter clips.

Security & compliance notes
- Only upload content for which you hold usage rights (including music). The app does not perform copyright checks.
- `client_secrets.json` and `token.json` contain sensitive information—do not commit them to a public repository.

Deployment suggestions
- For quick hosting, use Streamlit Community Cloud, Railway, or a VPS. You may need to:
  - Add a small amount of persistent storage for `token.json`.
  - Ensure ffmpeg is available in the runtime environment (use a Docker image that includes ffmpeg).
- If you want, I can prepare a Dockerfile with ffmpeg + Python and a sample systemd or Heroku/Cloud run config.

Next steps I can take (if you want)
- Create a PR adding these files and the new README into your repo (specify target path).
- Add a Dockerfile and deployment guide.
- Add per-file progress feedback during processing or unit tests for the build step.

If you'd like the README modified further (shorter, more developer-focused, or with a deployment-ready Dockerfile), tell me which direction and I’ll update it.
